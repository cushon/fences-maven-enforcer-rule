<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Violation.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Fences Enforcer Rule</a> &gt; <a href="index.source.html" class="el_package">com.google.security.fences</a> &gt; <span class="el_source">Violation.java</span></div><h1>Violation.java</h1><pre class="source lang-java linenums">package com.google.security.fences;

import org.apache.maven.artifact.Artifact;

import com.google.common.base.Objects;
import com.google.security.fences.config.Rationale;
import com.google.security.fences.namespace.Namespace;
import com.google.security.fences.policy.ApiElement;

final class Violation implements Comparable&lt;Violation&gt; {
  /** The artifact containing the use of the sensitive API that was denied. */
  final Artifact artifact;
  /** The namespace in which the violation occurred. */
  final Namespace useSiteContainer;
  /**
   * The source of the use of the sensitive API that was denied.
   * This is a human-readable form of {@link #useSiteContainer}, and probably
   * corresponds to a relative path of a .java file in the file-system on
   * which artifact was compiled, but nothing obviously available to the
   * currently running process.
   */
  final String useSiteSource;
  /**
   * The line number of the use of the sensitive API that was banned
   * or -1 if the user was compiled without debug symbols.
   */
  final int useSiteLineNumber;
  /** An API element on a sub-type (non-strict) of sensitiveApiElement. */
  final ApiElement useSiteApiElement;
  /** The API element to which access was denied. */
  final ApiElement sensitiveApiElement;
  /** The reason for denying access. */
  final Rationale rationale;

  Violation(
      Artifact artifact,
      Namespace useSiteContainer,
      String useSiteSource,
      int useSiteLineNumber,
      ApiElement useSiteApiElement,
      ApiElement sensitiveApiElement,
<span class="nc" id="L42">      Rationale rationale) {</span>
<span class="nc" id="L43">    this.artifact = artifact;</span>
<span class="nc" id="L44">    this.useSiteContainer = useSiteContainer;</span>
<span class="nc" id="L45">    this.useSiteSource = useSiteSource;</span>
<span class="nc" id="L46">    this.useSiteLineNumber = useSiteLineNumber;</span>
<span class="nc" id="L47">    this.useSiteApiElement = useSiteApiElement;</span>
<span class="nc" id="L48">    this.sensitiveApiElement = sensitiveApiElement;</span>
<span class="nc" id="L49">    this.rationale = rationale;</span>
<span class="nc" id="L50">  }</span>

  public int compareTo(Violation that) {
    @SuppressWarnings(&quot;unchecked&quot;)
<span class="nc" id="L54">    int delta = this.artifact.compareTo(that.artifact);</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">    if (delta == 0) {</span>
<span class="nc" id="L56">      delta = this.useSiteSource.compareTo(that.useSiteSource);</span>
<span class="nc bnc" id="L57" title="All 2 branches missed.">      if (delta == 0) {</span>
<span class="nc" id="L58">        delta = Integer.compare(useSiteLineNumber, that.useSiteLineNumber);</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">        if (delta == 0) {</span>
<span class="nc" id="L60">          delta = this.useSiteApiElement.compareTo(that.useSiteApiElement);</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">          if (delta == 0) {</span>
<span class="nc" id="L62">            delta = this.sensitiveApiElement.compareTo(</span>
                that.sensitiveApiElement);
          }
        }
      }
    }
<span class="nc" id="L68">    return delta;</span>
  }

  @Override
  public boolean equals(Object o) {
<span class="nc bnc" id="L73" title="All 2 branches missed.">    if (!(o instanceof Violation)) {</span>
<span class="nc" id="L74">      return false;</span>
    }
<span class="nc" id="L76">    Violation that = (Violation) o;</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">    return 0 == compareTo(that);</span>
  }

  @Override
  public int hashCode() {
<span class="nc" id="L82">    return Objects.hashCode(</span>
<span class="nc" id="L83">        artifact, useSiteSource, useSiteLineNumber,</span>
        useSiteApiElement, sensitiveApiElement);
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>