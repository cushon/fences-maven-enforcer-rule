<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-04-05 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160405" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Fences Enforcer Rule &#x2013; Fences</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Fences Enforcer Rule</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-04-05
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.3-beta-SNAPSHOT
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://maven.apache.org/enforcer/maven-enforcer-plugin/" class="externalLink" title="Maven Enforcer">
        Maven Enforcer</a>
      </li>

  
    <li class="pull-right">
                      <a href="./" title="Github project">
        Github project</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">docs</li>
                              
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="background.html" title="Background">
          <span class="none"></span>
        Background</a>
            </li>
                
      <li>
  
                          <a href="getting_started.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="caveats.html" title="Caveats">
          <span class="none"></span>
        Caveats</a>
            </li>
                
      <li>
  
                          <a href="policies.html" title="Policies">
          <span class="none"></span>
        Policies</a>
            </li>
                
      <li>
  
                          <a href="alternatives.html" title="Alternatives">
          <span class="none"></span>
        Alternatives</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-down"></span>
        Project Information</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="dependencies.html" title="Dependencies">
          <span class="none"></span>
        Dependencies</a>
            </li>
                    
      <li>
  
                          <a href="dependency-info.html" title="Dependency Information">
          <span class="none"></span>
        Dependency Information</a>
            </li>
                    
      <li>
  
                          <a href="distribution-management.html" title="Distribution Management">
          <span class="none"></span>
        Distribution Management</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>About</a>
          </li>
                    
      <li>
  
                          <a href="issue-tracking.html" title="Issue Tracking">
          <span class="none"></span>
        Issue Tracking</a>
            </li>
                    
      <li>
  
                          <a href="license.html" title="Project License">
          <span class="none"></span>
        Project License</a>
            </li>
                    
      <li>
  
                          <a href="mail-lists.html" title="Mailing Lists">
          <span class="none"></span>
        Mailing Lists</a>
            </li>
                    
      <li>
  
                          <a href="plugin-management.html" title="Plugin Management">
          <span class="none"></span>
        Plugin Management</a>
            </li>
                    
      <li>
  
                          <a href="plugins.html" title="Project Plugins">
          <span class="none"></span>
        Project Plugins</a>
            </li>
                    
      <li>
  
                          <a href="team-list.html" title="Project Team">
          <span class="none"></span>
        Project Team</a>
            </li>
                    
      <li>
  
                          <a href="source-repository.html" title="Source Repository">
          <span class="none"></span>
        Source Repository</a>
            </li>
                    
      <li>
  
                          <a href="project-summary.html" title="Project Summary">
          <span class="none"></span>
        Project Summary</a>
            </li>
              </ul>
        </li>
                      </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Fences</h1>
<p>Fecnes is a [maven-enforcer] rule that augments Java&#x2019;s access control by checking that a Maven Project and all its dependencies conform to a policy that specifies which classes/packages can link to which others.</p>
<p>See the links on the left for more detail. Here&#x2019;s an example of how the tool smooths interactions between different specialists contributing to a large project.</p>
<div class="section">
<h2><a name="A_tale_of_development_gone_wry."></a>A tale of development gone wry.</h2>
<p>Sally the security specialist is responsible for seeing that a particular security property for the project she&#x2019;s working. She wants to do her job without requiring every other developer to keep her goals in mind &#x2013; development won&#x2019;t scale any other way.</p>
<p>Sally wants to craft a solution from three packages</p>

<ol style="list-style-type: decimal">
  
<li>the parts of her code that are specific to her employer,</li>
  
<li>those that are generally useful that she can  give back to the open-source community,</li>
  
<li>some existing open-source code that fits well.</li>
</ol>
<p>Sally has structured things so that there is a <i>safe API</i> &#x2013; one whose use won&#x2019;t compromise the security property she&#x2019;s responsible for. But these various packages can&#x2019;t work together except via the <tt>public</tt>/<tt>protected</tt> API so that API must be larger than just the safe APIs</p>
<p>Development going quickly; Sally sees so many commits going by she knows there&#x2019;s no way she can review all of them to see that only the safe API is used or that the larger <tt>public</tt> API is only used in ways that preserve the security property.</p>
<p>Sally puts together a patch to the <a class="externalLink" href="https://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html#pom-relationships-sect-multi-vs-inherit">project POM</a> that <a href="usage.md">uses the fences rule</a>. The policy restricts access to the sensitive portions of Sally&#x2019;s APIs to code that she knows was reviewed with the system&#x2019;s security properties in mind.</p>
<p>Her team-lead integrates the patch, and adds an <a href="configuration.md#writing_good_rationales"><tt>&lt;addendum&gt;</tt></a> that points to the internal developer list and a FAQ that they plan to flesh-out as questions come in.</p>
<hr />
<p>Alex is an application-developer who knows his user-base and tools well. While Alex cares about the security of the system, he&#x2019;s got more than enough on his plate juggling feature work, the new design, etc.</p>
<p>Alex is a master of git-&#x2019;er-done style development &#x2013; using auto-complete to explore APIs instead of reading documentation. He stumbles upon some of Sally&#x2019;s sensitive APIs and writes code that links directly into the internals.</p>
<p>Next time he builds he gets an error message and he reads Sally&#x2019;s explanation:</p>

<blockquote>
<p>Please use com.example.FooBuilder instead of new com.example.foo.FooImpl().<br /> Ping sally@ for more details.</p>
</blockquote>
<p>He&#x2019;s not quite sure how to proceed, so he fires off a quick email to sally, does a quick search finds a <a href="faq.md">workaround</a> and continues development in experimental mode.</p>
<hr />
<p>Sally returns from lunch responds and writes a more finely tuned <tt>&lt;rationale&gt;</tt> for the specific API element Alex used.</p>
<hr />
<p>After several months on the project, Sally has fielded lots of questions about her work fleshing out the FAQ and policy docs as she goes; she&#x2019;s open-sourced some useful tools; and extended the policy to integrate with some common infrastructure that she&#x2019;s reviewed.</p>
<p>She knows that, while many developers build their development branches in experimental mode, the QA and production branches must pass the policy, so the amount of code she has to keep track of to do her job is limited by the policy.</p>
<p>Reviewers of pull-requests into release-candidate branches often address how to adjust code to match the policy, so the questions that reach Sally often have otherwise-functional code attached.</p>
<hr />
<p>The tech lead has found some other uses too:</p>

<ol style="list-style-type: decimal">
  
<li>Developers keep adding <tt>&lt;dependency&gt;</tt>s on a poorly written and  unmaintained project, so the tech lead crafted a policy rule to ban  its packages with a <tt>&lt;rationale&gt;</tt> that points them to another  <tt>&lt;dependency&gt;</tt> that serves the same purpose better.</li>
  
<li>A policy with a white-list of <tt>&lt;trusts&gt;</tt> elements allowed them  to aggressively deprecate some old internal APIs while  grandfathering some tricky old code that no-one wanted to  rewrite just now.</li>
</ol></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="https://www.google.com/about/appsecurity/">Google ISE</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
