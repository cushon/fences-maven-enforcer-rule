<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-05-06 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160506" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Fences Enforcer Rule &#x2013; Policies</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Fences Enforcer Rule</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-05-06
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.6-beta
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://maven.apache.org/enforcer/maven-enforcer-plugin/" class="externalLink" title="Maven Enforcer">
        Maven Enforcer</a>
      </li>

  
    <li class="pull-right">
                      <a href="./" title="Github project">
        Github project</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">docs</li>
                              
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="background.html" title="Background">
          <span class="none"></span>
        Background</a>
            </li>
                
      <li>
  
                          <a href="getting_started.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="caveats.html" title="Caveats">
          <span class="none"></span>
        Caveats</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Policies</a>
          </li>
                
      <li>
  
                          <a href="alternatives.html" title="Alternatives">
          <span class="none"></span>
        Alternatives</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                      </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Policies</h1>
<div class="section">
<h2><a name="To_what_do_policies_apply"></a>To what do policies apply?</h2>
<p>Policies apply to all production classes available to Maven:</p>

<ol style="list-style-type: decimal">
  
<li>All <tt>&lt;dependency&gt;</tt>s and <tt>&lt;module&gt;</tt>s, transitively that</li>
  
<li>are not in <tt>&lt;scope&gt;test&lt;/scope&gt;</tt>, and</li>
  
<li>are not excluded by Maven as a result of version conflicts.</li>
</ol></div>
<div class="section">
<h2><a name="Policy_Application_Algorithm"></a>Policy Application Algorithm</h2>
<p>A policy is violated when their exists a bytecode instruction in an untrusted namespace that uses a protected API.</p>
<p><a name="def_use"></a> <i>Uses</i> of APIs come in several forms:</p>

<ol style="list-style-type: decimal">
  
<li>Reads and writes of fields (<i>getfield</i>, <i>getstatic</i>, <i>putfield</i>, <i>putstatic</i>)</li>
  
<li>Calls of methods (<i>invokestatic</i>, <i>invokeinterface</i>, <i>invokestatic</i>)</li>
  
<li>Calls of constructors (<i>invokespecial</i>)</li>
</ol>
<p>For a use, we also have a <a class="externalLink" href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3"><i>descriptor</i></a> which encapsulates the signature. For methods this includes the static parameter types and return type as in <tt>(I[Ljava/lang/String;)V</tt> which is the signature of a void method that takes an <tt>int</tt> and an array of strings.</p>
<!-- ] -->
<hr />
<p><a name="def_api_element"></a> An <i>API element</i> is a triple (identifier, type, parent) where type is one of</p>

<ol style="list-style-type: decimal">
  
<li>constructor</li>
  
<li>method</li>
  
<li>field</li>
  
<li>class</li>
  
<li>package</li>
</ol>
<p>corresponding to the elements of the same name.</p>
<hr />
<p>Once we have an API element, a namespace, and a descriptor, we can come up with an ordering of API elements.</p>
<p>The first API element in this ordering that trusts or distrusts the using namespace determines the policy result. If there is no such element, then the namespace is trusted by default per the JVM&#x2019;s normal access rules.</p>
<p>We use the following principles to figure out how rules apply to uses.</p>

<ol style="list-style-type: decimal">
  
<li>The <a class="externalLink" href="https://en.wikipedia.org/wiki/Is-a"><i>is-a</i></a> rule:  Rules that apply to a super-type  apply to instances of a sub-type.</li>
  
<li>The abstraction rule: Rules that apply to an abstract or interface  method apply to all implementations of that method.</li>
  
<li>The works-with rule: A namespace applies to everything declared within  it. Java packages and classes define namespaces.  Java does not attach any special significance to the fact that the package  <tt>com.example.foo</tt> is a sub-package of <tt>com.example</tt>, but since packages  prefixes tend to predict who authored the code therein, we do.</li>
  
<li>The specificity rule: More specific rules win.  We judge speficity on how tightly it constrains  <a class="externalLink" href="https://en.wikipedia.org/wiki/Has-a">has-a</a>,  <a class="externalLink" href="https://en.wikipedia.org/wiki/Is-a">is-a</a>, and  works-with relationships.  Roughly: member &gt; exact class &gt; super type &gt; super interface  &gt; exact package &gt; super package.</li>
</ol>
<p><a name="specificity"></a> The table below shows the level of specificity of various kinds in order from greatest to least.</p>
<p>We compute our ordered list of API elements by computing the API elements that match these rules and concatenating them. The first of these API elements that corresponds to a <tt>&lt;trust&gt;</tt> or <tt>&lt;distrust&gt;</tt> for the current namespace determines the policy result.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Has-a </th>
      
<th>Is-a </th>
      
<th>Works-with </th>
      
<th>Description </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>High </td>
      
<td>High </td>
      
<td>/ </td>
      
<td>A <tt>&lt;constructor&gt;</tt>, <tt>&lt;method&gt;</tt> or <tt>&lt;field&gt;</tt> rule applies when the <a href="#def_receiver">receiver</a> is the same as the <tt>&lt;class&gt;</tt> that directly contains the rule. </td>
    </tr>
    
<tr class="a">
      
<td>High </td>
      
<td>Med </td>
      
<td>/ </td>
      
<td>A <tt>&lt;method&gt;</tt> or <tt>&lt;field&gt;</tt> rule applies on the sub-types of the <tt>&lt;class&gt;</tt> that directly contains it unless the sub-type overrides or masks it.</td>
    </tr>
    
<tr class="b">
      
<td>High </td>
      
<td>Low </td>
      
<td>/ </td>
      
<td>An abstract <tt>&lt;method&gt;</tt> rule applies to all uses of the method on sub-types of the containing <tt>&lt;class&gt;</tt> regardless of masking. </td>
    </tr>
    
<tr class="a">
      
<td>/ </td>
      
<td>High </td>
      
<td>/ </td>
      
<td>A <tt>&lt;class&gt;</tt> rule applies to all <a href="#def_use">uses</a> on a receiver whose static type is that class and which have the used member. </td>
    </tr>
    
<tr class="b">
      
<td>/ </td>
      
<td>Low </td>
      
<td>/ </td>
      
<td>A <tt>&lt;class&gt;</tt> rule applies to all uses on a receiver whose static type is a <i>subtype</i> of that class and which have the used member. </td>
    </tr>
    
<tr class="a">
      
<td>/ </td>
      
<td>/ </td>
      
<td>High </td>
      
<td>A <tt>&lt;class&gt;</tt> rule applies where one of its inner classes applies. </td>
    </tr>
    
<tr class="b">
      
<td>/ </td>
      
<td>/ </td>
      
<td>Med </td>
      
<td>A <tt>&lt;package&gt;</tt> rule applies where one of its classes applies. </td>
    </tr>
    
<tr class="a">
      
<td>/ </td>
      
<td>/ </td>
      
<td>Low </td>
      
<td>A <tt>&lt;package&gt;</tt> rule applies where one of its sub-packages applies. </td>
    </tr>
    
<tr class="b">
      
<td>/ </td>
      
<td>/ </td>
      
<td>/ </td>
      
<td>An <tt>&lt;api&gt;</tt> rule applies to all uses. </td>
    </tr>
  </tbody>
</table>
<hr />
<p><a name="def_receiver"></a> A &#x201c;receiver&#x201d; is the object or class that a use operates upon. This is the static type of the <tt>this</tt> in the body of a called method, the static type of the object whose field is being read, the class being constructed by a constructor invocation, or the class containing a static member.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="https://www.google.com/about/appsecurity/">Google ISE</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
