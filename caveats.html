<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-04-05 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160405" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Fences Enforcer Rule &#x2013; Caveats</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Fences Enforcer Rule</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-04-05
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.3-beta-SNAPSHOT
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://maven.apache.org/enforcer/maven-enforcer-plugin/" class="externalLink" title="Maven Enforcer">
        Maven Enforcer</a>
      </li>

  
    <li class="pull-right">
                      <a href="./" title="Github project">
        Github project</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">docs</li>
                              
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="background.html" title="Background">
          <span class="none"></span>
        Background</a>
            </li>
                
      <li>
  
                          <a href="getting_started.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Caveats</a>
          </li>
                
      <li>
  
                          <a href="policies.html" title="Policies">
          <span class="none"></span>
        Policies</a>
            </li>
                
      <li>
  
                          <a href="alternatives.html" title="Alternatives">
          <span class="none"></span>
        Alternatives</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                      </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Caveats</h1>
<p>Our goal with this project is to prevent a developer from <i>plausibly denying</i> that they are avoiding security review for security critical code while making it as easy as possible for developers to navigate the review process on the (hopefully infrequent) occasions they need to, and helping security reviewers focus and prioritize.</p>
<hr />
<p>This does static analysis only. It does not restrict how Java <b>reflection</b> is used so can be worked around via <tt>java.lang.reflect</tt> and <a class="externalLink" href="http://docs.oracle.com/javase/1.5.0/docs/guide/reflection/proxy.html">proxy classes</a>. <a class="externalLink" href="https://www.securecoding.cert.org/confluence/display/java/SEC05-J.+Do+not+use+reflection+to+increase+accessibility+of+classes,+methods,+or+fields">Some reflection APIs</a> intentionally break Java&#x2019;s access control restrictions, and similarly affect the additional restrictions imposed by this tool.</p>
<p>Similarly, this tool cannot prevent access to private constructors or fields done by Java <a class="externalLink" href="https://www.securecoding.cert.org/confluence/display/java/SER12-J.+Prevent+deserialization+of+untrusted+classes">deserialization</a> or other abstraction breaking mechanisms built into the JVM.</p>
<hr />
<p>This tool does not currently restrict uses of <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html#invokedynamic">invokedynamic</a> so can be worked around by <b>embedded scripting languages</b>.</p>
<hr />
<p>Granting access to a package grants all access to that package. Any artifact can introduce classes into <a class="externalLink" href="https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html"><b>unsealed packages</b></a> and thereby escalate privileges to that package&#x2019;s privileges. Sealing is <a class="externalLink" href="http://stackoverflow.com/questions/13527235/maven-how-do-i-mark-a-jar-as-sealed">easy in Maven</a>.</p>
<p>Sealing the package <tt>com.example</tt> does not prevent any other JAR from defining <tt>com.example.suffix</tt> because the Java language attaches no special significance to sub-packages. We do attach significance to package nesting relationships because package prefix is a good predictor of who authored code and so in whom trust is placed. We treat forging packages as unplausibly deniable but sealing is still a good idea.</p>
<hr />
<p><b>Inner class</b> support is <a class="externalLink" href="https://github.com/mikesamuel/fences-maven-enforcer-rule/issues/10">dodgy</a>. Denying access to an inner class while granting it to the outer class may not work.</p>
<hr />
<p>This rule checks all and only Maven <b><tt>&lt;dependency&gt;</tt>s</b>. It assumes that all code loaded is available as a dependency and cannot vet other code loaded at runtime like that dynamically compiled from JSPs or loaded via <b>classloaders</b> from resources.</p>
<hr />
<p>This rule does not <b>enumerate sub-types</b> so policies should be applied to the type at which an API element is declared. Specifically,</p>

<div class="source">
<div class="source"><pre class="prettyprint">package com.example;

interface A {
  void unsafe();
}

class B implements A {
  @Override
  public void unsafe() {
    ...
  }
}

class C {
  void f(B b) {
    A a = b;  // Cast B to A.
    a.unsafe();
  }
}
</pre></div></div>
<p>If a policy distrusted <tt>B.unsafe()</tt> thus</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;method&gt;
  &lt;name&gt;com.example.B.unsafe&lt;/name&gt;
  &lt;distrusts&gt;*&lt;/distrusts&gt;
&lt;/method&gt;
</pre></div></div>
<p>then the call to <tt>A.unsafe()</tt> would not violate the policy.</p>
<p><tt>unsafe</tt> is declared on <tt>A</tt> and implemented by <tt>B</tt> so the policy should target <tt>A.unsafe</tt>.</p>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="https://www.google.com/about/appsecurity/">Google ISE</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
